{%- comment -%}
  Product Features Grid Section
  A reusable grid section for displaying product features with icons
  Each feature is fully customizable through blocks
{%- endcomment -%}

{%- style -%}
  #ProductFeatures--{{ section.id }} {
    padding: {{ section.settings.padding_top }}px 0 {{ section.settings.padding_bottom }}px;
    background: {{ section.settings.background_color }};
  }

  .product-features__container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 2rem;
  }

  .product-features__header {
    text-align: center;
    margin-bottom: 4rem;
  }

  .product-features__title {
    font-family: var(--FONT-STACK-HEADING);
    font-size: clamp(2rem, 4vw, 3rem);
    font-weight: var(--FONT-WEIGHT-HEADING);
    font-style: var(--FONT-STYLE-HEADING);
    text-transform: var(--FONT-UPPERCASE-HEADING);
    letter-spacing: var(--LETTER-SPACING-HEADING);
    color: {{ section.settings.heading_color }};
    margin-bottom: 1rem;
  }

  .product-features__subtitle {
    font-family: var(--FONT-STACK-BODY);
    font-weight: var(--FONT-WEIGHT-BODY);
    font-style: var(--FONT-STYLE-BODY);
    letter-spacing: var(--LETTER-SPACING-BODY);
    font-size: 1.125rem;
    color: {{ section.settings.text_color }};
    opacity: 0.9;
    max-width: 600px;
    margin: 0 auto;
    line-height: 1.6;
  }

  .product-features__grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 2rem;
    margin-top: 3rem;
  }

  /* Feature Card Styles */
  .product-feature-card {
    background: {{ section.settings.card_background }};
    border: 1px solid {{ section.settings.border_color }};
    border-radius: 12px;
    padding: 2rem;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
  }

  .product-feature-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    border-color: {{ section.settings.hover_border_color }};
  }

  .product-feature-card__icon {
    width: 48px;
    height: 48px;
    margin-bottom: 1.25rem;
    display: flex;
    align-items: center;
    justify-content: center;
    background: {{ section.settings.icon_background }};
    border-radius: 8px;
    color: {{ section.settings.icon_color }};
  }

  .product-feature-card__icon svg,
  .product-feature-card__icon img {
    width: 28px;
    height: 28px;
    stroke-width: 1.5;
    stroke: {{ section.settings.icon_color }};
    fill: none;
    filter: brightness(0) invert(1);
  }

  .product-feature-card__icon .custom-icon {
    font-size: 28px;
    line-height: 1;
  }

  .product-feature-card__title {
    font-family: var(--FONT-STACK-HEADING);
    font-weight: var(--FONT-WEIGHT-HEADING);
    font-style: var(--FONT-STYLE-HEADING);
    letter-spacing: var(--LETTER-SPACING-HEADING);
    font-size: 1.25rem;
    color: {{ section.settings.heading_color }};
    margin-bottom: 0.75rem;
    line-height: 1.3;
  }

  .product-feature-card__description {
    font-family: var(--FONT-STACK-BODY);
    font-weight: var(--FONT-WEIGHT-BODY);
    font-style: var(--FONT-STYLE-BODY);
    letter-spacing: var(--LETTER-SPACING-BODY);
    font-size: 0.9375rem;
    color: {{ section.settings.text_color }};
    line-height: 1.6;
    opacity: 0.85;
  }

  /* Responsive Design */
  @media screen and (min-width: 768px) and (max-width: 1023px) {
    .product-features__grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  @media screen and (min-width: 1024px) {
    .product-features__grid {
      grid-template-columns: repeat({{ section.settings.desktop_columns }}, 1fr);
      gap: 2.5rem;
    }
  }

  @media screen and (max-width: 767px) {
    .product-features__grid {
      grid-template-columns: 1fr;
      gap: 1.5rem;
    }

    .product-feature-card {
      padding: 1.5rem;
    }

    .product-features__header {
      margin-bottom: 2.5rem;
    }

    .product-features__title {
      font-size: 1.75rem;
    }

    .product-features__subtitle {
      font-size: 1rem;
    }

    .product-feature-card__description {
      font-size: 0.8125rem;
      line-height: 1.45;
    }
  }

  /* Animation */
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .product-feature-card {
    animation: fadeInUp 0.6s ease-out forwards;
    opacity: 0;
  }

  {% for i in (1..12) %}
    .product-feature-card:nth-child({{ i }}) { animation-delay: {{ i | times: 0.05 }}s; }
  {% endfor %}
{%- endstyle -%}

<section id="ProductFeatures--{{ section.id }}" class="product-features-section">
  <div class="product-features__container">
    <!-- Section Header -->
    {%- if section.settings.heading != blank or section.settings.subtitle != blank -%}
      <div class="product-features__header">
        {%- if section.settings.heading != blank -%}
          <h2 class="product-features__title">{{ section.settings.heading }}</h2>
        {%- endif -%}
        {%- if section.settings.subtitle != blank -%}
          <p class="product-features__subtitle">{{ section.settings.subtitle }}</p>
        {%- endif -%}
      </div>
    {%- endif -%}

    <!-- Features Grid -->
    <div class="product-features__grid">
      {%- for block in section.blocks -%}
        {%- case block.type -%}
          {%- when 'feature' -%}
            <div class="product-feature-card" {{ block.shopify_attributes }}>
              <div class="product-feature-card__icon">
                {%- if block.settings.custom_svg != blank -%}
                  <img src="{{ block.settings.custom_svg | asset_url }}" alt="" width="28" height="28">
                {%- else -%}
                  {%- case block.settings.icon -%}
                  {%- when 'calendar' -%}
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                    </svg>
                  {%- when 'smile' -%}
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                  {%- when 'lock' -%}
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
                    </svg>
                  {%- when 'exit' -%}
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
                    </svg>
                  {%- when 'shield' -%}
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
                    </svg>
                  {%- when 'block' -%}
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636" />
                    </svg>
                  {%- when 'globe' -%}
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9" />
                    </svg>
                  {%- when 'battery' -%}
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M13 10V3L4 14h7v7l9-11h-7z" />
                    </svg>
                  {%- when 'trophy' -%}
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                  {%- when 'check' -%}
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />
                    </svg>
                  {%- when 'star' -%}
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z" />
                    </svg>
                  {%- when 'heart' -%}
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
                    </svg>
                  {%- when 'clock' -%}
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                  {%- when 'users' -%}
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" />
                    </svg>
                  {%- when 'cog' -%}
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
                      <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                    </svg>
                  {%- when 'chart' -%}
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
                    </svg>
                  {%- when 'custom' -%}
                    {%- if block.settings.custom_icon != blank -%}
                      <span class="custom-icon">{{ block.settings.custom_icon }}</span>
                    {%- else -%}
                      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M13 10V3L4 14h7v7l9-11h-7z" />
                      </svg>
                    {%- endif -%}
                  {%- else -%}
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M13 10V3L4 14h7v7l9-11h-7z" />
                    </svg>
                  {%- endcase -%}
                {%- endif -%}
              </div>
              {%- if block.settings.title != blank -%}
                <h3 class="product-feature-card__title">{{ block.settings.title }}</h3>
              {%- endif -%}
              {%- if block.settings.description != blank -%}
                <p class="product-feature-card__description">{{ block.settings.description }}</p>
              {%- endif -%}
            </div>
        {%- endcase -%}
      {%- endfor -%}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Product Features Grid",
  "class": "product-features-grid-section",
  "settings": [
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Section Heading",
      "default": "Key Features"
    },
    {
      "type": "text",
      "id": "subtitle",
      "label": "Section Subtitle",
      "default": "Everything you need to succeed"
    },
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "range",
      "id": "desktop_columns",
      "label": "Desktop Columns",
      "min": 2,
      "max": 4,
      "step": 1,
      "default": 3
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background Color",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "heading_color",
      "label": "Heading Color",
      "default": "#FFFFFF"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text Color",
      "default": "#B0B0B0"
    },
    {
      "type": "color",
      "id": "card_background",
      "label": "Card Background",
      "default": "rgba(255, 255, 255, 0.05)"
    },
    {
      "type": "color",
      "id": "border_color",
      "label": "Card Border Color",
      "default": "rgba(255, 255, 255, 0.1)"
    },
    {
      "type": "color",
      "id": "hover_border_color",
      "label": "Card Hover Border Color",
      "default": "rgba(255, 255, 255, 0.2)"
    },
    {
      "type": "color",
      "id": "icon_background",
      "label": "Icon Background Color",
      "default": "rgba(255, 255, 255, 0.1)"
    },
    {
      "type": "color",
      "id": "icon_color",
      "label": "Icon Color",
      "default": "#FFFFFF"
    },
    {
      "type": "header",
      "content": "Spacing"
    },
    {
      "type": "range",
      "id": "padding_top",
      "label": "Top Padding",
      "min": 0,
      "max": 150,
      "step": 10,
      "default": 80,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "label": "Bottom Padding",
      "min": 0,
      "max": 150,
      "step": 10,
      "default": 80,
      "unit": "px"
    }
  ],
  "blocks": [
    {
      "type": "feature",
      "name": "Feature",
      "settings": [
        {
          "type": "text",
          "id": "custom_svg",
          "label": "Custom SVG Icon",
          "info": "Enter the filename of an SVG in the assets folder (e.g., 'calendar-icon.svg')"
        },
        {
          "type": "select",
          "id": "icon",
          "label": "Default Icon (if no custom SVG)",
          "default": "star",
          "options": [
            { "value": "calendar", "label": "Calendar" },
            { "value": "smile", "label": "Smile" },
            { "value": "lock", "label": "Lock" },
            { "value": "exit", "label": "Exit/Door" },
            { "value": "shield", "label": "Shield" },
            { "value": "block", "label": "Block/Prohibited" },
            { "value": "globe", "label": "Globe/Web" },
            { "value": "battery", "label": "Battery/Lightning" },
            { "value": "trophy", "label": "Trophy/Badge" },
            { "value": "check", "label": "Check" },
            { "value": "star", "label": "Star" },
            { "value": "heart", "label": "Heart" },
            { "value": "clock", "label": "Clock" },
            { "value": "users", "label": "Users/Team" },
            { "value": "cog", "label": "Settings/Cog" },
            { "value": "chart", "label": "Chart/Analytics" },
            { "value": "custom", "label": "Custom Emoji/Text" }
          ]
        },
        {
          "type": "text",
          "id": "custom_icon",
          "label": "Custom Icon (Emoji or Text)",
          "info": "Enter an emoji or text when 'Custom' is selected above",
          "default": "🚀"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Feature Title",
          "default": "Feature Name"
        },
        {
          "type": "textarea",
          "id": "description",
          "label": "Feature Description",
          "default": "Brief description of this feature and its benefits."
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Product Features Grid",
      "blocks": [
        {
          "type": "feature",
          "settings": {
            "icon": "calendar",
            "title": "Smart Schedules",
            "description": "Schedule your focus periods to start and end automatically."
          }
        },
        {
          "type": "feature",
          "settings": {
            "icon": "smile",
            "title": "Built-in Breaks",
            "description": "Get up to three 5-min breaks every focus session."
          }
        },
        {
          "type": "feature",
          "settings": {
            "icon": "lock",
            "title": "Strict Mode",
            "description": "Prevents deletion of app during a focus session."
          }
        },
        {
          "type": "feature",
          "settings": {
            "icon": "exit",
            "title": "Emergency Exits",
            "description": "Unlock all apps without your card up to three times."
          }
        },
        {
          "type": "feature",
          "settings": {
            "icon": "shield",
            "title": "Child Mode",
            "description": "Lock your child's apps, and only the card can unlock them."
          }
        },
        {
          "type": "feature",
          "settings": {
            "icon": "block",
            "title": "Advanced Blocking",
            "description": "Block adult content, in-app purchases, and app installs."
          }
        }
      ]
    }
  ]
}
{% endschema %}