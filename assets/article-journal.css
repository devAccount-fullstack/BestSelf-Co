/* Article Journal Template - Custom Styles */
/* Leverages existing theme CSS variables and patterns */

/* ============================================
   Hide Third-Party Widgets on Article Pages
   ============================================ */
body.template-article.template-article--journal {
  /* Hide common live chat widgets */
  iframe[title*="chat"],
  iframe[title*="Chat"],
  iframe[src*="tawk"],
  iframe[src*="crisp"],
  iframe[src*="tidio"],
  iframe[src*="zendesk"],
  iframe[src*="intercom"],
  iframe[src*="drift"],
  iframe[src*="freshchat"],
  iframe[src*="gorgias"],
  iframe[src*="richpanel"],
  iframe[src*="rich-panel"],
  div[class*="rich-panel"],
  div[class*="richpanel"],
  div[id*="rich-panel"],
  div[id*="richpanel"],
  
  /* Hide common rewards/loyalty widgets */
  iframe[src*="smile"],
  iframe[src*="yotpo"],
  iframe[src*="stamped"],
  iframe[src*="loox"],
  iframe[src*="okendo"],
  iframe[src*="growave"],
  iframe[src*="loyalty"],
  iframe[src*="rewards"],
  div[class*="smile-"],
  div[class*="yotpo"],
  div[class*="stamped"],
  div[class*="loyalty"],
  div[class*="rewards"],
  div[id*="smile-"],
  div[id*="yotpo"],
  div[id*="stamped"],
  div[id*="loyalty"],
  div[id*="rewards"],
  
  /* Hide generic floating widgets */
  div[class*="floating-widget"],
  div[class*="chat-widget"],
  div[class*="widget-container"][style*="fixed"],
  div[style*="position: fixed"][style*="bottom"],
  div[style*="position: fixed"][style*="right"],
  
  /* Specific app-injected elements */
  .smile-launcher-frame,
  .smile-launcher,
  .yotpo-widget-instance,
  .stamped-launcher,
  .loox-floating-widget,
  .growave-launcher,
  #tidio-chat,
  #tawk-widget,
  #crisp-chatbox,
  #zendesk-widget,
  #intercom-container,
  #drift-widget,
  .gorgias-chat-container,
  .rich-panel-launcher,
  .richpanel-launcher,
  
  /* Judge.me specific elements that might float */
  .jdgm-widget[style*="fixed"],
  .jdgm-carousel-wrapper[style*="fixed"] {
    display: none !important;
    visibility: hidden !important;
    opacity: 0 !important;
    pointer-events: none !important;
    z-index: -9999 !important;
  }
}

/* Ensure featured products bar is above any remaining elements */
body.template-article.template-article--journal .article-products-mobile {
  z-index: 999999 !important;
}

/* ============================================
   Progress Bar Component
   ============================================ */
.article-progress-bar {
  will-change: transform;
  backdrop-filter: blur(2px);
}

.article-progress-fill {
  background: linear-gradient(90deg, var(--pop), var(--jet));
  will-change: width;
}

/* ============================================
   Sticky Header Styles
   ============================================ */
.article-sticky-header {
  backdrop-filter: blur(10px);
  background: rgba(255, 255, 255, 0.95);
}

.article-sticky-header__content {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.article-sticky-header__title {
  font-size: 1.125rem;
  font-weight: 600;
  margin: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  max-width: 60%;
}

.article-sticky-header__meta {
  display: flex;
  gap: 1rem;
  font-size: 0.875rem;
  color: var(--ash);
}

.article-sticky-header__progress {
  font-weight: 600;
  color: var(--pop);
}

/* ============================================
   Article Typography Enhancement
   ============================================ */
.article-content {
  font-family: var(--font-body);
}

.article-content h2::before {
  content: "";
  display: block;
  width: 40px;
  height: 3px;
  background: var(--pop);
  margin-bottom: 1rem;
}

.article-content blockquote {
  position: relative;
  padding-left: 2rem;
}

.article-content blockquote::before {
  content: """;
  position: absolute;
  left: 0;
  top: -0.5rem;
  font-size: 3rem;
  color: var(--pop);
  font-family: Georgia, serif;
  line-height: 1;
}

/* Pull Quote Style */
.article-content .pull-quote {
  margin: 3rem -2rem;
  padding: 2rem;
  font-size: 1.5rem;
  line-height: 1.5;
  text-align: center;
  border-top: 2px solid var(--pop);
  border-bottom: 2px solid var(--pop);
  font-style: italic;
  color: var(--jet);
}

/* ============================================
   Table of Contents Active State
   ============================================ */
@keyframes pulse {
  0% {
    opacity: 1;
  }
  50% {
    opacity: 0.6;
  }
  100% {
    opacity: 1;
  }
}

.article-toc__link.is-active {
  animation: pulse 2s ease-in-out;
}

/* ============================================
   Image Captions
   ============================================ */
.article-content figure {
  margin: 2rem 0;
}

.article-content figcaption {
  margin-top: 0.5rem;
  font-size: 0.875rem;
  color: var(--ash);
  text-align: center;
  font-style: italic;
}

/* ============================================
   Mobile Optimizations
   ============================================ */
@media (max-width: 749px) {
  .article-hero__content {
    padding: 1.5rem;
  }
  
  .article-content {
    font-size: 1rem;
    line-height: 1.65;
  }
  
  .article-content h2 {
    font-size: 1.5rem;
  }
  
  .article-content h3 {
    font-size: 1.25rem;
  }
  
  .article-content .pull-quote {
    margin: 2rem -1rem;
    font-size: 1.25rem;
  }
  
  .article-sticky-header__title {
    font-size: 1rem;
    max-width: 50%;
  }
  
  .article-products-mobile__toggle {
    position: relative;
  }
  
  .article-products-mobile__toggle::before {
    content: "";
    position: absolute;
    top: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 40px;
    height: 4px;
    background: rgba(255, 255, 255, 0.3);
    border-radius: 2px;
  }
}

/* ============================================
   Smooth Scrolling Enhancement
   ============================================ */
html {
  scroll-behavior: smooth;
}

/* ============================================
   Share Button Feedback
   ============================================ */
.article-sharing__button.copied {
  background: var(--pop);
  color: white;
  border-color: var(--pop);
}

.article-sharing__button.copied::after {
  content: "Copied!";
  position: absolute;
  bottom: -25px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 0.75rem;
  white-space: nowrap;
  background: var(--jet);
  color: white;
  padding: 0.25rem 0.5rem;
  border-radius: 4px;
}

/* ============================================
   Loading States
   ============================================ */
.article-skeleton {
  background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
  background-size: 200% 100%;
  animation: loading 1.5s infinite;
}

@keyframes loading {
  0% {
    background-position: 200% 0;
  }
  100% {
    background-position: -200% 0;
  }
}

/* ============================================
   Print Styles
   ============================================ */
@media print {
  .article-progress-bar,
  .article-sticky-header,
  .article-toc,
  .article-toc-mobile,
  .article-products,
  .article-products-mobile,
  .article-sharing {
    display: none !important;
  }
  
  .article-content {
    max-width: 100%;
    font-size: 12pt;
  }
  
  .article-hero {
    min-height: auto;
    page-break-after: avoid;
  }
}