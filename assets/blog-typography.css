/*
 * Blog Typography System
 * Modern editorial design for improved readability
 * Inspired by Medium, Substack, and Every.to
 */

/* ========================================
   Typography Variables
   ======================================== */
:root {
  /* Base Typography Settings */
  --base-font-size: 18px;
  --base-line-height: 1.75;
  
  /* Font Sizes */
  --font-size-xs: 0.75rem;    /* 12px */
  --font-size-sm: 0.875rem;   /* 14px */
  --font-size-base: 1rem;     /* 16px */
  --font-size-md: 1.125rem;   /* 18px */
  --font-size-lg: 1.25rem;    /* 20px */
  --font-size-xl: 1.5rem;     /* 24px */
  --font-size-2xl: 2rem;      /* 32px */
  --font-size-3xl: 2.5rem;    /* 40px */
  --font-size-4xl: 3rem;      /* 48px */
  
  /* Line Heights */
  --line-height-tight: 1.2;
  --line-height-snug: 1.3;
  --line-height-normal: 1.5;
  --line-height-relaxed: 1.65;
  --line-height-loose: 1.75;
  
  /* Letter Spacing */
  --letter-spacing-tight: -0.02em;
  --letter-spacing-normal: 0;
  --letter-spacing-wide: 0.025em;
  
  /* Colors */
  --text-primary: rgba(0, 0, 0, 0.84);
  --text-secondary: rgba(0, 0, 0, 0.7);
  --text-tertiary: rgba(0, 0, 0, 0.54);
  --link-color: #0066cc;
  --border-color: #333;
  
  /* Spacing */
  --spacing-xs: 0.5rem;    /* 8px */
  --spacing-sm: 1rem;      /* 16px */
  --spacing-md: 1.5rem;    /* 24px */
  --spacing-lg: 2rem;      /* 32px */
  --spacing-xl: 3rem;      /* 48px */
  --spacing-2xl: 4rem;     /* 64px */
}

/* ========================================
   Container & Layout
   ======================================== */
.article-container,
.article__wrapper {
  max-width: 750px;
  margin: 0 auto;
  padding: 0 20px;
}

.article__content__wrapper {
  max-width: 750px;
  margin: 0 auto;
}

/* Override theme defaults for optimal reading width */
.wrapper--narrow,
.wrapper.article__wrapper,
#ArticleContent .wrapper--narrow {
  max-width: 750px !important;
}

/* Ensure journal content sections also use correct width */
.article-content-wrapper,
.article-journal-content .wrapper--narrow {
  max-width: 750px !important;
}

/* Enhanced article content wrapper */
.article__content {
  font-size: var(--font-size-md);
  line-height: var(--line-height-loose);
  color: var(--text-primary);
  
  /* Smooth font rendering */
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* ========================================
   Article Header
   ======================================== */
.article__hero {
  margin-bottom: var(--spacing-xl);
}

/* Article Title */
.article__title,
.article-single h1,
.article__hero .h2[data-article-title] {
  font-size: clamp(32px, 5vw, 48px) !important;
  line-height: var(--line-height-tight) !important;
  font-weight: 700 !important;
  margin-bottom: var(--spacing-sm) !important;
  letter-spacing: var(--letter-spacing-tight) !important;
  color: var(--text-primary) !important;
  max-width: 750px;
  margin-left: auto;
  margin-right: auto;
}

/* Article Subtitle/Excerpt */
.article__excerpt,
.article-subtitle {
  font-size: clamp(18px, 2.5vw, 22px);
  line-height: var(--line-height-normal);
  font-weight: 400;
  color: var(--text-secondary);
  margin-bottom: var(--spacing-lg);
  max-width: 750px;
  margin-left: auto;
  margin-right: auto;
}

/* Article Meta Information */
.article__meta {
  font-size: var(--font-size-sm);
  color: var(--text-tertiary);
  margin-bottom: var(--spacing-lg);
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--spacing-sm);
}

.article__meta time {
  font-weight: 500;
}

/* ========================================
   Body Typography
   ======================================== */

/* Paragraphs - Using Libre Baskerville per theme style guide */
.article__content p,
.article__content.rte p {
  font-family: 'Libre Baskerville', Georgia, serif !important;
  font-size: 16px !important;  /* Matching template spec */
  line-height: 28px !important;  /* Matching template spec */
  margin-bottom: 28px;
  color: var(--text-primary);
  font-weight: 400;
}

/* First paragraph emphasis */
.article__content > p:first-of-type {
  font-size: 19px !important;
  line-height: 32px !important;
  font-weight: 400;
  color: var(--text-primary);
  font-family: 'Libre Baskerville', Georgia, serif !important;
}

/* Drop cap for first letter */
.article__content > p:first-of-type::first-letter {
  float: left;
  font-size: 3.5em;
  line-height: 0.8;
  margin: 0.05em 0.1em -0.1em 0;
  font-weight: 700;
  color: var(--text-primary);
}

/* ========================================
   Headings - Matching Theme Style Guide
   ======================================== */

/* All headings use Inter font family */
.article__content h1,
.article__content h2,
.article__content h3,
.article__content h4,
.article__content h5,
.article__content h6,
.article__content.rte h1,
.article__content.rte h2,
.article__content.rte h3,
.article__content.rte h4,
.article__content.rte h5,
.article__content.rte h6 {
  font-family: 'Inter', system-ui, -apple-system, sans-serif !important;
  font-weight: 600;
  color: var(--text-primary);
  clear: both; /* Clear floats from drop caps */
}

/* H1 Headers - Article Title */
.article__content h1,
.article__content.rte h1 {
  font-size: 40px !important;
  line-height: 1.3 !important;
  font-weight: 700 !important;
  margin-top: var(--spacing-xl);
  margin-bottom: var(--spacing-lg);
  letter-spacing: var(--letter-spacing-tight);
}

/* H2 Headers - Major Sections */
.article__content h2,
.article__content.rte h2 {
  font-size: 32px !important;
  line-height: 1.35 !important;
  font-weight: 600 !important;
  margin-top: 56px;  /* More space above H2 */
  margin-bottom: 28px;  /* Good space below for content */
  color: var(--text-primary);
  letter-spacing: -0.01em;
}

/* H3 Headers - Subsections */
.article__content h3,
.article__content.rte h3 {
  font-size: 24px !important;
  line-height: 1.4 !important;
  font-weight: 700 !important;  /* Matching the template bold weight */
  margin-top: 42px;  /* Good separation from previous content */
  margin-bottom: 20px;  /* Space for following content */
  color: var(--text-primary);
  letter-spacing: -0.005em;
}

/* H4 Headers - Minor Subsections */
.article__content h4,
.article__content.rte h4 {
  font-size: 20px !important;
  line-height: 1.45 !important;
  font-weight: 600 !important;
  margin-top: 36px;
  margin-bottom: 16px;
  color: var(--text-primary);
}

/* H5 & H6 Headers - Small Headers */
.article__content h5,
.article__content h6,
.article__content.rte h5,
.article__content.rte h6 {
  font-size: 16px !important;
  line-height: 1.5 !important;
  font-weight: 600 !important;
  margin-top: 28px;
  margin-bottom: 14px;
  color: var(--text-primary);
  font-family: 'Libre Baskerville', serif !important;  /* Following template pattern */
}

/* Ensure first heading after opening paragraph has proper spacing */
.article__content > p + h2,
.article__content > p + h3 {
  margin-top: 48px;
}

/* Reduce top margin if heading follows another heading */
.article__content h2 + h3,
.article__content h3 + h4,
.article__content h4 + h5 {
  margin-top: 24px;
}

/* ========================================
   Lists
   ======================================== */

.article__content ul,
.article__content ol,
.article__content.rte ul,
.article__content.rte ol {
  margin: 28px 0;
  padding-left: 32px;
  font-family: 'Libre Baskerville', Georgia, serif !important;
  font-size: 16px !important;
  line-height: 28px !important;
}

.article__content li,
.article__content.rte li {
  margin-bottom: 12px;
  line-height: 28px !important;
  color: var(--text-primary);
  font-family: 'Libre Baskerville', Georgia, serif !important;
  font-size: 16px !important;
}

/* Nested lists */
.article__content li ul,
.article__content li ol {
  margin-top: 12px;
  margin-bottom: 12px;
}

/* ========================================
   Blockquotes & Pull Quotes
   ======================================== */

.article__content blockquote,
.article__content.rte blockquote {
  font-size: 21px;
  line-height: 1.6;
  font-style: italic;
  margin: 36px 0;
  padding-left: 24px;
  border-left: 3px solid var(--border-color);
  color: var(--text-secondary);
}

.article__content blockquote p {
  font-size: inherit;
  line-height: inherit;
  margin-bottom: 16px;
}

.article__content blockquote cite {
  display: block;
  font-size: var(--font-size-sm);
  font-style: normal;
  font-weight: 600;
  margin-top: 16px;
  color: var(--text-tertiary);
}

/* Pull Quote Style */
.article__content .pull-quote {
  font-size: 28px;
  line-height: 1.4;
  font-weight: 300;
  text-align: center;
  margin: var(--spacing-xl) 0;
  padding: var(--spacing-lg) 0;
  border-top: 1px solid var(--text-tertiary);
  border-bottom: 1px solid var(--text-tertiary);
  color: var(--text-primary);
  font-style: normal;
}

/* ========================================
   Links
   ======================================== */

.article__content a,
.article__content.rte a {
  color: inherit;
  text-decoration: underline;
  text-decoration-thickness: 1px;
  text-underline-offset: 2px;
  transition: color 0.2s ease, text-decoration-color 0.2s ease;
  text-decoration-color: rgba(0, 102, 204, 0.4);
}

.article__content a:hover,
.article__content.rte a:hover {
  color: var(--link-color);
  text-decoration-color: var(--link-color);
}

/* ========================================
   Images & Media
   ======================================== */

.article__content img,
.article__content.rte img {
  max-width: 100%;
  height: auto;
  margin: var(--spacing-lg) 0;
  border-radius: 4px;
}

/* Full-width images */
.article__content .full-width-image {
  width: 100vw;
  position: relative;
  left: 50%;
  right: 50%;
  margin-left: -50vw;
  margin-right: -50vw;
  max-width: none;
}

/* Image captions */
.article__content figcaption,
.article__content .image-caption {
  font-size: var(--font-size-sm);
  color: var(--text-tertiary);
  text-align: center;
  margin-top: 12px;
  margin-bottom: var(--spacing-lg);
  font-style: italic;
}

/* ========================================
   Tables
   ======================================== */

.article__content table {
  width: 100%;
  margin: var(--spacing-lg) 0;
  border-collapse: collapse;
  font-size: var(--font-size-base);
}

.article__content th,
.article__content td {
  padding: 12px;
  text-align: left;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.article__content th {
  font-weight: 600;
  background-color: rgba(0, 0, 0, 0.02);
}

/* ========================================
   Code Blocks
   ======================================== */

.article__content code,
.article__content.rte code {
  font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Code', monospace;
  font-size: 0.9em;
  padding: 2px 6px;
  background-color: rgba(0, 0, 0, 0.05);
  border-radius: 3px;
}

.article__content pre,
.article__content.rte pre {
  margin: var(--spacing-lg) 0;
  padding: var(--spacing-md);
  background-color: rgba(0, 0, 0, 0.03);
  border-radius: 6px;
  overflow-x: auto;
}

.article__content pre code {
  background-color: transparent;
  padding: 0;
}

/* ========================================
   Horizontal Rules
   ======================================== */

.article__content hr,
.article__content.rte hr {
  border: none;
  height: 1px;
  background: linear-gradient(to right, transparent, rgba(0, 0, 0, 0.2), transparent);
  margin: var(--spacing-xl) 0;
}

/* Section divider style */
.article__content .section-divider {
  text-align: center;
  margin: var(--spacing-xl) 0;
  font-size: var(--font-size-lg);
  letter-spacing: 0.5em;
}

/* ========================================
   Mobile Responsive
   ======================================== */

@media (max-width: 768px) {
  :root {
    --base-font-size: 17px;
  }
  
  .article-container,
  .article__wrapper {
    padding: 0 24px;  /* More comfortable padding on mobile */
    max-width: 100%;
  }
  
  .article__content__wrapper {
    max-width: 100%;
  }
  
  /* Mobile Typography - Optimized for comfort */
  .article__content p,
  .article__content.rte p {
    font-size: 14px !important;  /* Matching template mobile spec */
    line-height: 24px !important;  /* Matching template mobile spec */
    margin-bottom: 20px;  /* More breathing room between paragraphs */
  }
  
  .article__content > p:first-of-type {
    font-size: 16px !important;
    line-height: 26px !important;
  }
  
  /* Disable drop cap on mobile */
  .article__content > p:first-of-type::first-letter {
    float: none;
    font-size: inherit;
    line-height: inherit;
    margin: 0;
  }
  
  /* Mobile Headings - Matching template specs */
  .article__title,
  .article-single h1,
  .article__hero .h2[data-article-title] {
    font-size: 32px !important;  /* Matching template */
    margin-bottom: 16px !important;
  }
  
  .article__content h1,
  .article__content.rte h1 {
    font-size: 32px !important;
    margin-top: 32px;
    margin-bottom: 20px;
  }
  
  .article__content h2,
  .article__content.rte h2 {
    font-size: 26px !important;  /* Matching template */
    margin-top: 40px;  /* Good separation */
    margin-bottom: 20px;  /* Space for content */
  }
  
  .article__content h3,
  .article__content.rte h3 {
    font-size: 20px !important;  /* Matching template */
    margin-top: 32px;
    margin-bottom: 16px;
  }
  
  .article__content h4,
  .article__content.rte h4 {
    font-size: 18px !important;  /* Matching template */
    margin-top: 28px;
    margin-bottom: 14px;
  }
  
  .article__content h5,
  .article__content h6,
  .article__content.rte h5,
  .article__content.rte h6 {
    font-size: 14px !important;  /* Matching template */
    line-height: 24px !important;
  }
  
  /* Mobile Lists */
  .article__content ul,
  .article__content ol,
  .article__content.rte ul,
  .article__content.rte ol {
    padding-left: 24px;
    margin: 20px 0;
    font-size: 14px !important;
    line-height: 24px !important;
  }
  
  .article__content li,
  .article__content.rte li {
    margin-bottom: 8px;
    font-size: 14px !important;
    line-height: 24px !important;
  }
  
  /* Mobile Blockquotes */
  .article__content blockquote,
  .article__content.rte blockquote {
    font-size: 18px;
    margin: 24px 0;
    padding-left: 16px;
  }
  
  /* Mobile Pull Quotes */
  .article__content .pull-quote {
    font-size: 22px;
    margin: var(--spacing-lg) 0;
    padding: var(--spacing-md) 0;
  }
}

/* ========================================
   Tablet Responsive
   ======================================== */

@media (min-width: 769px) and (max-width: 1024px) {
  .article-container,
  .article__wrapper {
    padding: 0 24px;
  }
  
  .article__content p,
  .article__content.rte p {
    font-size: 17px;
  }
}

/* ========================================
   Print Styles
   ======================================== */

@media print {
  .article__content {
    font-size: 12pt;
    line-height: 1.5;
  }
  
  .article__content h2 {
    page-break-after: avoid;
    font-size: 18pt;
  }
  
  .article__content h3 {
    page-break-after: avoid;
    font-size: 14pt;
  }
  
  .article__content blockquote {
    border-left: 2pt solid #000;
  }
}

/* ========================================
   Accessibility Enhancements
   ======================================== */

/* Focus styles for interactive elements */
.article__content a:focus {
  outline: 2px solid var(--link-color);
  outline-offset: 2px;
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  .article__content {
    color: #000;
  }
  
  .article__content a {
    text-decoration-thickness: 2px;
  }
}

/* Reduced motion preferences */
@media (prefers-reduced-motion: reduce) {
  .article__content a {
    transition: none;
  }
}

/* ========================================
   Dark Mode Support (Optional)
   ======================================== */

@media (prefers-color-scheme: dark) {
  :root {
    --text-primary: rgba(255, 255, 255, 0.87);
    --text-secondary: rgba(255, 255, 255, 0.70);
    --text-tertiary: rgba(255, 255, 255, 0.54);
    --link-color: #4da6ff;
    --border-color: #666;
  }
  
  .article__content code {
    background-color: rgba(255, 255, 255, 0.1);
  }
  
  .article__content pre {
    background-color: rgba(255, 255, 255, 0.05);
  }
  
  .article__content th {
    background-color: rgba(255, 255, 255, 0.05);
  }
}

/* ========================================
   Article Enhancement Features
   ======================================== */

/* Reading time indicator */
.article-reading-time {
  font-size: var(--font-size-sm);
  color: var(--text-tertiary);
  margin-bottom: var(--spacing-md);
  text-align: center;
}

/* Article tags */
.article-tags {
  display: flex;
  flex-wrap: wrap;
  gap: var(--spacing-xs);
  margin-top: var(--spacing-lg);
  padding-top: var(--spacing-lg);
  border-top: 1px solid rgba(0, 0, 0, 0.1);
}

.article-tag {
  font-size: var(--font-size-sm);
  padding: 4px 12px;
  background-color: rgba(0, 0, 0, 0.05);
  border-radius: 16px;
  color: var(--text-secondary);
  text-decoration: none;
  transition: background-color 0.2s ease;
}

.article-tag:hover {
  background-color: rgba(0, 0, 0, 0.1);
  color: var(--text-primary);
}

/* Share buttons */
.article-share {
  display: flex;
  gap: var(--spacing-sm);
  justify-content: center;
  margin: var(--spacing-xl) 0;
}

.article-share-button {
  padding: 8px 16px;
  border: 1px solid rgba(0, 0, 0, 0.2);
  border-radius: 4px;
  text-decoration: none;
  color: var(--text-secondary);
  font-size: var(--font-size-sm);
  transition: all 0.2s ease;
}

.article-share-button:hover {
  background-color: var(--text-primary);
  color: white;
  border-color: var(--text-primary);
}